!function(e){var t={};function i(n){if(t[n])return t[n].exports;var a=t[n]={i:n,l:!1,exports:{}};return e[n].call(a.exports,a,a.exports,i),a.l=!0,a.exports}i.m=e,i.c=t,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)i.d(n,a,function(t){return e[t]}.bind(null,a));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s=0)}([function(e,t,i){"use strict";i(1),i(2),i(3),i(4),i(5)},function(e,t,i){"use strict";if("undefined"==typeof AFRAME)throw new Error("Component attempted to register before AFRAME was available.");AFRAME.registerComponent("querier_github",{schema:{user:{type:"string"},token:{type:"string"}},multiple:!1,init:function(){var e=this.data,t=this.el;e.user&&n(e,t)},update:function(e){this.data,this.el},remove:function(){},pause:function(){},play:function(){}});var n=function(e,t){var i=new XMLHttpRequest,n="https://api.github.com/users/"+e.user+"/repos";i.open("get",n),i.onload=function(){if(this.status>=200&&this.status<300){console.log("data OK in request.response",t.id),e.dataRetrieved=JSON.parse(i.response),t.setAttribute("data_retrieved",JSON.stringify(e.dataRetrieved));var n=new CustomEvent("dataReady"+t.id,{detail:e.dataRetrieved});t.dispatchEvent(n)}else reject({status:this.status,statusText:xhr.statusText})},i.onerror=function(){reject({status:this.status,statusText:xhr.statusText})},i.send()}},function(e,t,i){"use strict";if("undefined"==typeof AFRAME)throw new Error("Component attempted to register before AFRAME was available.");AFRAME.registerComponent("vismapper",{schema:{width:{type:"string"},depth:{type:"string"},height:{type:"string"}},multiple:!1,init:function(){this.data,this.el},update:function(e){var t=this.data,i=this.el;t.dataToShow&&("box"===i.components.geometry.data.primitive&&(i.components.geometry.data.height=t.dataToShow[t.height]/100,i.components.geometry.data.width=t.dataToShow[t.width]||2,i.components.geometry.data.depth=t.dataToShow[t.depth]||2),i.components.geometry.update(i.components.geometry.data))},remove:function(){},pause:function(){},play:function(){}})},function(e,t,i){"use strict";if("undefined"==typeof AFRAME)throw new Error("Component attempted to register before AFRAME was available.");AFRAME.registerComponent("visdata",{dependencies:["querier","vismapper"],schema:{from:{type:"string"},index:{type:"number"}},multiple:!1,init:function(){var e=this.data,t=(this.el,document.getElementById(e.from));t.getAttribute("data_received")&&(e.dataRetrieved=JSON.parse(t.getAttribute("data_retrieved"))[e.index])},update:function(e){var t=this.data,i=this.el;t!==e&&(t.dataRetrieved!==e.dataRetrieved&&(i.components.vismapper.data.dataToShow=t.dataRetrieved,i.components.vismapper.update(i.components.vismapper.data)),t.from!==e.from&&(console.log("Change event because from has changed"),document.getElementById(t.from).removeEventListener("dataReady"+e.from,function(e){}),document.getElementById(t.from).addEventListener("dataReady"+t.from,function(e){t.dataRetrieved=e.detail[t.index],i.components.vismapper.data.dataToShow=t.dataRetrieved,i.components.vismapper.update(i.components.vismapper.data)})))},remove:function(){},pause:function(){},play:function(){}})},function(e,t,i){"use strict";window.onload=function(){document.getElementById("queriertest").addEventListener("dataReadyqueriertest",function(e){var t=e.detail;console.log("AQUI ESTA",t);var i=document.createElement("a-entity");i.setAttribute("layout","type: box; columns: "+t.length/4+"; margin: 5; plane: xz"),t.forEach(function(e,t){var n=function(e){var t=document.createElement("a-entity");return t.setAttribute("geometry","primitive: box"),t.setAttribute("material","color: red"),t.setAttribute("visdata","from: queriertest; index:"+e),t.setAttribute("vismapper","width: open_issues; depth: open_issues; height: size"),t}(e);i.appendChild(n)}),document.getElementById("AframeScene").appendChild(i)})}},function(e,t){var i=[],n=new THREE.Vector3;function a(e,t,a){var r,o,s,d,u,c,h=Math.ceil(t/e.columns);for(o=e.marginColumn,s=e.marginRow,a&&(o=e.margin,s=e.margin),u=l(e.align,h),d=l(e.align,e.columns),c=0;c<h;c++)for(r=0;r<e.columns;r++)n.set(0,0,0),0===e.plane.indexOf("x")&&(n.x=(r-d)*o),0===e.plane.indexOf("y")&&(n.y=(r-d)*o),1===e.plane.indexOf("y")&&(n.y=(c-u)*s),1===e.plane.indexOf("z")&&(n.z=(c-u)*s),f(n);return i}function r(e,t){var a,r;for(a=0;a<t;a++)r=isNaN(e.angle)?a*(2*Math.PI)/t:a*e.angle*.01745329252,n.set(0,0,0),0===e.plane.indexOf("x")&&(n.x=e.radius*Math.cos(r)),0===e.plane.indexOf("y")&&(n.y=e.radius*Math.cos(r)),1===e.plane.indexOf("y")&&(n.y=e.radius*Math.sin(r)),1===e.plane.indexOf("z")&&(n.z=e.radius*Math.sin(r)),f(n);return i}function o(e,t){return e.columns=t,a(e,t,!0)}function s(e,t){return p(1,0,0,0,1,0,0,0,1,-1,0,0,0,-1,0,0,0,-1),c(e.radius/2),i}function d(e,t){var n=(1+Math.sqrt(5))/2,a=1/n,r=2-n,o=-1*a,s=-1*r;return p(-1,r,0,-1,s,0,0,-1,r,0,-1,s,0,1,r,0,1,s,1,r,0,1,s,0,a,a,a,a,a,o,a,o,a,a,o,o,r,0,1,r,0,-1,o,a,a,o,a,o,o,o,a,o,o,o,s,0,1,s,0,-1),c(e.radius/2),i}function u(e,t){var n=Math.sqrt(3),a=-1/Math.sqrt(3);return p(0,0,n+a,-1,0,a,1,0,a,0,2*Math.sqrt(2/3),0),c(e.radius/2),i}function l(e,t){switch(e){case"start":return t-1;case"center":return(t-1)/2;case"end":return 0}}function c(e){var t;for(t=0;t<i.length;t++)i[t]=i[t]*e}function h(e,t,i){var n,a,r;if(i)for(a=0;a<e.length;a++)null!=(n=e[a].getAttribute(i))&&(r=3*parseInt(n,10),e[a].object3D.position.set(t[r],t[r+1],t[r+2]));else for(a=0;a<t.length;a+=3){if(!e[a/3])return;e[a/3].object3D.position.set(t[a],t[a+1],t[a+2])}}function p(){var e;for(e=0;e<arguments.length;e++)i.push(e)}function f(e){i.push(e.x),i.push(e.y),i.push(e.z)}AFRAME.registerComponent("layout",{schema:{angle:{type:"number",default:!1,min:0,max:360,if:{type:["circle"]}},columns:{default:1,min:0,if:{type:["box"]}},margin:{default:1,min:0,if:{type:["box","line"]}},marginColumn:{default:1,min:0,if:{type:["box"]}},marginRow:{default:1,min:0,if:{type:["box"]}},orderAttribute:{default:""},plane:{default:"xy"},radius:{default:1,min:0,if:{type:["circle","cube","dodecahedron","pyramid"]}},reverse:{default:!1},type:{default:"line",oneOf:["box","circle","cube","dodecahedron","line","pyramid"]},fill:{default:!0,if:{type:["circle"]}},align:{default:"end",oneOf:["start","center","end"]}},init:function(){var e=this,t=this.el;this.children=t.getChildEntities(),this.initialPositions=[],this.children.forEach(function(t){if(t.hasLoaded)return i();function i(){e.initialPositions.push(t.object3D.position.x),e.initialPositions.push(t.object3D.position.y),e.initialPositions.push(t.object3D.position.z)}t.addEventListener("loaded",i)}),this.handleChildAttached=this.handleChildAttached.bind(this),this.handleChildDetached=this.handleChildDetached.bind(this),t.addEventListener("child-attached",this.handleChildAttached),t.addEventListener("child-detached",this.handleChildDetached),t.addEventListener("layoutrefresh",this.update.bind(this))},update:function(e){var t,n,l,c=this.children,p=this.data,f=this.el;switch(n=c.length,p.type){case"box":l=a;break;case"circle":l=r;break;case"cube":l=s;break;case"dodecahedron":l=d;break;case"pyramid":l=u;break;default:l=o}t=f.getDOMAttribute("layout"),i.length=0,i=l(p,n,"string"==typeof t?-1!==t.indexOf("margin"):"margin"in t),p.reverse&&i.reverse(),h(c,i,p.orderAttribute)},remove:function(){this.el.removeEventListener("child-attached",this.handleChildAttached),this.el.removeEventListener("child-detached",this.handleChildDetached),h(this.children,this.initialPositions)},handleChildAttached:function(e){var t=this.el;e.detail.el.parentNode===t&&(this.children.push(e.detail.el),this.update())},handleChildDetached:function(e){-1!==this.children.indexOf(e.detail.el)&&(this.children.splice(this.children.indexOf(e.detail.el),1),this.initialPositions.splice(this.children.indexOf(e.detail.el),1),this.update())}}),e.exports.getBoxPositions=a,e.exports.getCirclePositions=r,e.exports.getLinePositions=o,e.exports.getCubePositions=s,e.exports.getDodecahedronPositions=d,e.exports.getPyramidPositions=u}]);
//# sourceMappingURL=aframe-components-city.js.map